(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,a){},171:function(e,t,a){},173:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(27),i=a.n(s),l=(a(75),a(2)),o=a(3),c=a(5),m=a(4),d=a(6),u=(a(77),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App-header"},r.a.createElement("div",{className:"header-title"},"SeeFood"),r.a.createElement("div",{className:"header-name"},this.props.user))}}]),t}(n.Component)),p=a(66),h=(a(79),a(14)),v=a.n(h),g=a(21),f=a.n(g),E="https://1ec702e5.ngrok.io",b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onChange=function(e,t){a.setState(Object(p.a)({},e,t.target.value))},a.onSubmitForm=function(){var e=Number(a.state.ageAnswer);if(isNaN(e)||e<2)alert("Please enter a valid number for age (at least 2).");else if(""===a.state.genderAnswer||""===a.state.activeAnswer)alert("Please select an option for each question.");else{a.setState({submitLoading:!0});var t=new FormData;t.append("name",a.props.user),t.append("gender",a.state.genderAnswer),t.append("age",e),t.append("activity_level",a.state.activeAnswer),v()({method:"post",url:E+"/user",data:t,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(e){a.props.updateCalorieNeeds(e.data),a.setState({submitLoading:!1})}).catch(function(e){alert("Form submission failed with "+e),a.setState({submitLoading:!1})})}},a.state={genderAnswer:"",ageAnswer:"",activeAnswer:"",submitLoading:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.submitLoading?r.a.createElement(f.a,{type:"ThreeDots",color:"#FFFFFF",height:10,width:60}):"Get Started";return r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"form-header"},"Learning Your Nutrition Needs"),r.a.createElement("div",{className:"form-body"},r.a.createElement("div",{className:"form-question"},"Gender"),r.a.createElement("div",{className:"form-answer"},r.a.createElement("form",{className:"genderForm"},r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"genderAnswer",value:"Male",onChange:function(t){return e.onChange("genderAnswer",t)}})," ","Male"),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"genderAnswer",value:"Female",onChange:function(t){return e.onChange("genderAnswer",t)}})," ","Female"),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"genderAnswer",value:"Other",onChange:function(t){return e.onChange("genderAnswer",t)}}),"Other"))),r.a.createElement("div",{className:"form-question"},"Age"),r.a.createElement("div",{className:"form-answer"},r.a.createElement("input",{name:"ageAnswer",onChange:function(t){return e.onChange("ageAnswer",t)},value:this.state.ageAnswer,type:"number",className:"answer-input"})),r.a.createElement("div",{className:"form-question"},"Physical Activity Level"),r.a.createElement("div",{className:"form-answer"},r.a.createElement("form",{className:"activeForm"},r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"activeAnswer",value:"Sedentary",onChange:function(t){return e.onChange("activeAnswer",t)}}),"Sedentary"),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"activeAnswer",value:"Moderately Active",onChange:function(t){return e.onChange("activeAnswer",t)}}),"Moderately Active"),r.a.createElement("div",null,r.a.createElement("input",{type:"radio",name:"activeAnswer",value:"Active",onChange:function(t){return e.onChange("activeAnswer",t)}}),"Active"))),r.a.createElement("div",{className:"button-div"},r.a.createElement("button",{onClick:this.onSubmitForm,className:"form-button",disabled:this.state.submitLoading},t))))}}]),t}(n.Component),N=a(69),y=(a(167),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t="/seefood/pics/"+this.props.mealName.replace(/\s/g,"")+".jpeg";return this.props.isMeal?r.a.createElement("div",{className:"meal"},r.a.createElement("img",{src:t,className:"meal-pic",alt:""}),r.a.createElement("div",{className:"meal-title"},this.props.mealName),r.a.createElement("div",{className:"meal-details"},r.a.createElement("div",null,"Calories: ",this.props.mealDetails.calories.toFixed(2)),r.a.createElement("div",null,"Carbs (g): ",this.props.mealDetails.carbohydrate.toFixed(2))),r.a.createElement("div",{className:"meal-details"},r.a.createElement("div",null,"Sodium (g): ",this.props.mealDetails.sodium.toFixed(2)),r.a.createElement("div",null,"Protein (g): ",this.props.mealDetails.protein.toFixed(2))),r.a.createElement("button",{className:"remove-button",onClick:function(){return e.props.onRemoveClicked(e.props.index)}},"Remove")):r.a.createElement("div",{className:"rec"},r.a.createElement("img",{src:t,className:"meal-pic",alt:""}),r.a.createElement("div",{className:"meal-title"},this.props.mealName),r.a.createElement("div",{className:"meal-details"},r.a.createElement("div",null,"Calories: ",this.props.mealDetails.calories.toFixed(2)),r.a.createElement("div",null,"Carbs (g): ",this.props.mealDetails.carbohydrate.toFixed(2))),r.a.createElement("div",{className:"meal-details"},r.a.createElement("div",null,"Sodium (g): ",this.props.mealDetails.sodium.toFixed(2)),r.a.createElement("div",null,"Protein (g): ",this.props.mealDetails.protein.toFixed(2))),r.a.createElement("div",{className:"link-div"},r.a.createElement("form",{action:"https://www.bhg.com/recipe/homemade-vanilla-yogurt/",target:"_blank"},r.a.createElement("input",{className:"link-form",type:"submit",value:"Recipe"}))))}}]),t}(n.Component)),C=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.meals.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(y,{mealName:Object.keys(t)[0],mealDetails:t[Object.keys(t)[0]],isMeal:!0,onRemoveClicked:e.props.onRemoveClicked,index:a}))}))}}]),t}(n.Component),w=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.recommendations.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(y,{mealName:Object.keys(t)[0],mealDetails:t[Object.keys(t)[0]],isMeal:!1,onRemoveClicked:e.props.onRemoveClicked,index:a}))}))}}]),t}(n.Component),O=(a(169),a(171),a(173),["Calories","Protein (g)","Calcium (g)","Sodium (g)","Fiber (g)","Vitamin C (g)","Potassium (g)","Carbohydrate (g)","Sugars (g)","Total Fat (g)","Saturated Fat (g)"]),j=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).getTableContent=function(){return r.a.createElement("tbody",null,O.map(function(e,t){return r.a.createElement("tr",{key:e,className:"table-body-row"},r.a.createElement("td",null,e),r.a.createElement("td",null,a.props.currentNutrients[t]),r.a.createElement("td",null,a.props.suggestedValues[t]))}))},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.uploadLoading?null:this.getTableContent();return this.props.uploadLoading?r.a.createElement("div",{className:"summary-loading"},r.a.createElement(f.a,{type:"ThreeDots",color:"#4484ce",height:20,width:100})):r.a.createElement("table",{className:"summary-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nutrient"),r.a.createElement("th",null,"Current"),r.a.createElement("th",null,"Suggested"))),e)}}]),t}(n.Component),k="https://1ec702e5.ngrok.io",F=["calories","protein","calcium","sodium","fiber","vitaminc","potassium","carbohydrate","sugars","fat","saturated"],A=2e3,S=[0,0,0,0,0,0,0,0,0,0,0],D=[2e3,50,1,2.4,25,60,3.5,.3,50,65,20],L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).onRemoveClicked=function(e){var t=a.state.meals[e],n=a.state.meals.slice();n.splice(e,1),a.setState({meals:n});for(var r=a.state.currentNutrients.slice(),s=0;s<F.length;s++)r[s]-=t[Object.keys(t)[0]][F[s]],r[s]=Math.max(0,r[s].toFixed(2));a.setState({currentNutrients:r});var i=new FormData;i.append("food_name",Object.keys(t)[0]),i.append("name",a.props.user),i.append("timestamp",t[Object.keys(t)[0]].timestamp),v()({method:"delete",url:k+"/meal",data:i,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(e){console.log(e)}).catch(function(e){alert("Remove meal failed with "+e)})},a.onFileChange=function(e){if(e.length>0){a.setState({uploadLoading:!0});var t=new FormData;t.append("file",e[0]),t.append("name",a.props.user),t.append("timestamp",new Date),v()({method:"post",url:k+"/meal",data:t,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(e){a.updateMeals(a.state.startDate)}).catch(function(e){alert("Upload image failed with "+e),a.setState({uploadLoading:!1})})}},a.handleDateChange=function(e){a.setState({startDate:e,uploadLoading:!0,meals:[],recommendations:[]}),a.updateMeals(e)},a.updateSuggestions=function(){var e=a.props.calorieNeeds/A,t=a.state.suggestedValues.slice().map(function(t){return Number(t*e).toFixed(2)});a.setState({suggestedValues:t})},a.updateNutrients=function(e){for(var t=[],n=0;n<F.length;n++)t.push(e[F[n]].toFixed(2));a.setState({currentNutrients:t}),a.updateRecommendations(t[0]-a.state.suggestedValues[0])},a.updateRecommendations=function(e){var t=new FormData;t.append("calories_needed",e),v()({method:"post",url:k+"/recommend",data:t,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(e){for(var t=[],n=e.data,r=0;r<n.length;r++){var s={};s[n[r].name]=n[r],t.push(s)}a.setState({recommendations:t})}).catch(function(e){alert("Get recommendations failed with "+e)})},a.updateMeals=function(e){var t=new FormData;t.append("user_name",a.props.user),t.append("timestamp",e),v()({method:"post",url:k+"/getmeals",data:t,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(e){var t=[],n=e.data.food;if(n.length>0){for(var r=0;r<n.length;r++){for(var s={},i=0;i<Object.keys(n[r]).length;i++)isNaN(n[r][Object.keys(n[r])[i]])||(n[r][Object.keys(n[r])[i]]*=3);s[n[r].food_name]=n[r],t.push(s)}a.updateNutrients(e.data.nutrition[0])}else a.updateRecommendations(Math.round(a.state.suggestedValues[0])),a.setState({currentNutrients:S});a.setState({meals:t,uploadLoading:!1})}).catch(function(e){alert("Get daily meals failed with "+e),a.setState({uploadLoading:!1})})},a.state={startDate:new Date,meals:[],recommendations:[],currentNutrients:S,suggestedValues:D,uploadLoading:!0},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.updateSuggestions(),this.updateMeals(this.state.startDate)}},{key:"render",value:function(){var e=this,t=this.state.uploadLoading?r.a.createElement(f.a,{type:"ThreeDots",color:"#FFFFFF",height:12,width:30}):"+ Add";return r.a.createElement("div",{className:"daily-view"},r.a.createElement("div",{className:"daily-meals"},r.a.createElement("div",{className:"meals-header"},"Daily Tracker",r.a.createElement(N.a,{className:"daily-date",selected:this.state.startDate,onChange:this.handleDateChange,dateFormat:"MMMM d, yyyy",disabled:this.uploadLoading})),r.a.createElement("div",{className:"meals-body"},r.a.createElement("div",{className:"meals-rec"},r.a.createElement("div",{className:"rec-header"},"Recommendations"),r.a.createElement(w,{recommendations:this.state.recommendations,onRemoveClicked:this.onRemoveClicked})),r.a.createElement("div",{className:"meals-list"},r.a.createElement("div",{className:"list-header"},"Meals",r.a.createElement("div",null,r.a.createElement("input",{onChange:function(t){return e.onFileChange(t.target.files)},type:"file",id:"files",className:"hidden",disabled:this.state.uploadLoading}),r.a.createElement("button",{className:"add-meal-button",disabled:this.state.uploadLoading},r.a.createElement("label",{htmlFor:"files",className:"add-meal-label",disabled:this.state.uploadLoading},t)))),r.a.createElement(C,{meals:this.state.meals,onRemoveClicked:this.onRemoveClicked})))),r.a.createElement("div",{className:"daily-nutrition"},r.a.createElement("div",{className:"nutrition-header"},"Nutrition Statistics"),r.a.createElement("div",{className:"nutrition-body"},r.a.createElement(j,{currentNutrients:this.state.currentNutrients,suggestedValues:this.state.suggestedValues,uploadLoading:this.state.uploadLoading}))))}}]),t}(n.Component),M=(a(175),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).updateCalorieNeeds=function(e){a.setState({calorieNeeds:e})},a.state={user:"Jian Yang",calorieNeeds:0},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.calorieNeeds?r.a.createElement("div",null,r.a.createElement(L,{user:this.state.user,calorieNeeds:this.state.calorieNeeds})):r.a.createElement("div",null,r.a.createElement("div",{className:"Start-title"},"PERSONALIZED FOR YOU"),r.a.createElement("div",{className:"Start-form"},r.a.createElement(b,{user:this.state.user,updateCalorieNeeds:this.updateCalorieNeeds})));return r.a.createElement("div",{className:"App"},r.a.createElement(u,{user:this.state.user}),r.a.createElement("div",{className:"App-body"},e))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},70:function(e,t,a){e.exports=a(177)},75:function(e,t,a){},77:function(e,t,a){},79:function(e,t,a){}},[[70,2,1]]]);
//# sourceMappingURL=main.2bbcb38c.chunk.js.map